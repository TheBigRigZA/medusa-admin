import{f as g}from"./chunk-IR5DHEKS-aVJcUHa1.js";import{u as j}from"./chunk-HFB3OQXI-CYdwm9Y3.js";import{C as v}from"./chunk-GZBFGV7Y-DvnGhJ2g.js";import{K as b}from"./chunk-6HTZNHPT-C1VCEAwt.js";import{b as s,u as y}from"./chunk-4TC5YS65-i7CSL2wi.js";import{a6 as m,b as p,R,fa as C,j as e,H as P,a8 as _,a9 as F,fd as N,t as u,w as n,B as h,s as S}from"./index-D0xSocvJ.js";import"./x-mark-mini-BgX2qn7f.js";import"./triangles-mini-CzVTrYYm.js";import"./plus-mini-DTt7Cc5t.js";import"./prompt-DfKH3g5K.js";var T=m.object({provider_id:m.string().min(1)}),E=({taxRegion:i})=>{const{t:a}=p(),{handleSuccess:d}=y(),o=j({queryKey:["tax_providers"],queryFn:r=>S.admin.taxProvider.list(r),getOptions:r=>r.tax_providers.map(l=>({label:g(l.id),value:l.id}))}),t=_({defaultValues:{provider_id:i.provider_id},resolver:F(T)}),{mutateAsync:c,isPending:x}=N(i.id),f=t.handleSubmit(async r=>{await c({provider_id:r.provider_id},{onSuccess:()=>{u.success(a("taxRegions.edit.successToast")),d()},onError:l=>{u.error(l.message)}})});return e.jsx(s.Form,{form:t,children:e.jsxs(b,{className:"flex flex-1 flex-col overflow-hidden",onSubmit:f,children:[e.jsx(s.Body,{className:"flex flex-1 flex-col gap-y-6 overflow-auto",children:e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsx(n.Field,{control:t.control,name:"provider_id",render:({field:r})=>e.jsxs(n.Item,{children:[e.jsx(n.Label,{children:a("taxRegions.fields.taxProvider")}),e.jsx(n.Control,{children:e.jsx(v,{...r,options:o.options,searchValue:o.searchValue,onSearchValueChange:o.onSearchValueChange,fetchNextPage:o.fetchNextPage})}),e.jsx(n.ErrorMessage,{})]})})})}),e.jsx(s.Footer,{className:"shrink-0",children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(s.Close,{asChild:!0,children:e.jsx(h,{size:"small",variant:"secondary",children:a("actions.cancel")})}),e.jsx(h,{size:"small",type:"submit",isLoading:x,children:a("actions.save")})]})})]})})},M=()=>{const{t:i}=p(),{id:a}=R(),{tax_region:d,isPending:o,isError:t,error:c}=C(a),x=!o&&!!d;if(t)throw c;return e.jsxs(s,{children:[e.jsxs(s.Header,{children:[e.jsx(s.Title,{asChild:!0,children:e.jsx(P,{children:i("taxRegions.edit.header")})}),e.jsx(s.Description,{className:"sr-only",children:i("taxRegions.edit.hint")})]}),x&&e.jsx(E,{taxRegion:d})]})};export{M as Component};
